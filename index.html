<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Automatic, semi-automatic, and manual functions for
    generating color maps from images. The idea is to simplify
    the colors of an image according to a metric that is useful for
    the user, using deterministic methods whenever possible.
    Many images will be clustered well using the out-of-the-box
    functions, but the package also includes a toolbox of functions
    for making manual adjustments (layer merging/isolation, blurring,
    fitting to provided color clusters or those from another image, etc).
    Also includes export methods for other color/pattern analysis packages
    (pavo, patternize, colordistance).">
<title>Color-Based Image Segmentation • recolorize</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Color-Based Image Segmentation">
<meta property="og:description" content="Automatic, semi-automatic, and manual functions for
    generating color maps from images. The idea is to simplify
    the colors of an image according to a metric that is useful for
    the user, using deterministic methods whenever possible.
    Many images will be clustered well using the out-of-the-box
    functions, but the package also includes a toolbox of functions
    for making manual adjustments (layer merging/isolation, blurring,
    fitting to provided color clusters or those from another image, etc).
    Also includes export methods for other color/pattern analysis packages
    (pavo, patternize, colordistance).">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">recolorize</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/Introduction.html">Introduction</a>
    <a class="dropdown-item" href="articles/step00_prep.html">Step 0: Image acquisition and preparation</a>
    <a class="dropdown-item" href="articles/step01_loading.html">Step 1: Loading &amp; processing images</a>
    <a class="dropdown-item" href="articles/step02_initial_cluster.html">Step 2: Initial clustering</a>
    <a class="dropdown-item" href="articles/step03_refinement.html">Step 3: Refinement</a>
    <a class="dropdown-item" href="articles/step04_manual_tweak.html">Step 4: Tweaks &amp; edits</a>
    <a class="dropdown-item" href="articles/step05_visualization_export.html">Step 5: Exporting &amp; visualizing output</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/hiweller/recolorize/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="recolorize-v010">recolorize v0.1.0<a class="anchor" aria-label="anchor" href="#recolorize-v010"></a>
</h1></div>
<!-- badges: start -->
<div class="section level4">
<h4 id="color-based-image-segmentation-for-people-with-other-things-to-do">Color-based image segmentation (for people with other things to do).<a class="anchor" aria-label="anchor" href="#color-based-image-segmentation-for-people-with-other-things-to-do"></a>
</h4>
<p><img src="reference/figures/kmeans_vs_recolorize.svg" align="center" width="600"></p>
<blockquote><p>Comparison of color maps produced using k-means clustering (center) vs. <code>recolorize</code> (right). Original image credits: Jack Randall, Nathan P. Lord, and Alison Davis-Rabosky.</p></blockquote>
<ul>
<li>
<strong>Update, Apr. 2022</strong>: Please cite the <a href="https://www.biorxiv.org/content/10.1101/2022.04.03.486906v1" class="external-link">preprint</a> if you’re using this package! (Also, please read the preprint.)</li>
<li>
<strong>Update, Dec. 2021</strong>: recolorize is now <a href="https://cran.r-project.org/web/packages/recolorize/index.html" class="external-link">on CRAN</a>!</li>
<li>
<strong>Update, Sept. 2021</strong>: A methods manuscript is in progress, but in the meantime, if you need to cite this package, please cite <a href="https://scholar.google.com/scholar?cluster=7568048124372269297&amp;hl=en&amp;oi=scholarr" class="external-link">this abstract</a>.</li>
</ul>
</div>
<div class="section level2">
<h2 id="what-is-this">What is this?<a class="anchor" aria-label="anchor" href="#what-is-this"></a>
</h2>
<p>This is a package for making color maps, which are needed (or at least useful) for a wide range of color analysis techniques. It was born out of conversations with many biologists who found, to their surprise and mine, that generating color maps were the bottleneck step in their analyses. Fully automated methods rarely work all of the time, and are difficult to modify, while fully manual methods are subjective and time-consuming. This package tries to split the difference by giving you a mix of tools that will do a pretty good job with no user input, and then allow minor manual changes like merging and filtering layers or splitting components, before exporting them to the next step of your analysis (e.g. <a href="https://cran.r-project.org/package=pavo" class="external-link">pavo</a>, <a href="https://cran.r-project.org/package=patternize" class="external-link">patternize</a>). It’s also, for the most part, totally deterministic – no arbitrary seed-setting for repeatability.</p>
</div>
<div class="section level2">
<h2 id="quick-start">Quick start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<p>Install the package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># development version:</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"hiweller/recolorize"</span><span class="op">)</span>

<span class="co"># OR</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"recolorize"</span><span class="op">)</span> <span class="co"># CRAN release</span></code></pre></div>
<p>To run <code>recolorize</code> on a single image:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://hiweller.github.io/recolorize/">recolorize</a></span><span class="op">)</span>

<span class="co"># load an image that comes with the package:</span>
<span class="va">img</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/corbetti.png"</span>, package <span class="op">=</span> <span class="st">"recolorize"</span><span class="op">)</span>
<span class="va">rc</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/recolorize2.html">recolorize2</a></span><span class="op">(</span><span class="va">img</span>, cutoff <span class="op">=</span> <span class="fl">45</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/recolorize_corbetti.png" align="center" width="600"></p>
<p>A batch processing example:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get list of all PNGs that come with the package:</span>
<span class="va">images</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"recolorize"</span><span class="op">)</span>,
             pattern <span class="op">=</span> <span class="st">".png"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># for every image...</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">images</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>

  <span class="co"># get an initial fit with generic clustering</span>
  <span class="va">init_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/recolorize2.html">recolorize2</a></span><span class="op">(</span><span class="va">images</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, method <span class="op">=</span> <span class="st">"hist"</span>, bins <span class="op">=</span> <span class="fl">2</span>, cutoff <span class="op">=</span> <span class="fl">25</span>, plotting <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

  <span class="co"># drop small patches</span>
  <span class="va">refined_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/thresholdRecolor.html">thresholdRecolor</a></span><span class="op">(</span><span class="va">init_fit</span>, pct <span class="op">=</span> <span class="fl">0.01</span>, plotting <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

  <span class="co"># store in an output variable</span>
  <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">colormap_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">refined_fit</span><span class="op">)</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="va">colormap_list</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">refined_fit</span>
  <span class="op">}</span>
<span class="op">}</span>

<span class="co"># compare original to recolored images:</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/layout.html" class="external-link">layout</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, nrow <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>
<span class="va">o</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">colormap_list</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">i</span><span class="op">$</span><span class="va">original_img</span><span class="op">)</span><span class="op">)</span>
<span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">colormap_list</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="reference/plotImageArray.html">plotImageArray</a></span><span class="op">(</span><span class="fu"><a href="reference/recoloredImage.html">recoloredImage</a></span><span class="op">(</span><span class="va">i</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/batch_processing.png" align="center" width="600"></p>
<p>See <a href="https://cran.r-project.org/web/packages/recolorize/vignettes/Introduction.html" class="external-link">package vignettes</a> for detailed documentation.</p>
</div>
<div class="section level2">
<h2 id="how-does-it-work">How does it work?<a class="anchor" aria-label="anchor" href="#how-does-it-work"></a>
</h2>
<p>Recolorize is a toolbox of automatic, semi-automatic, and manual methods that aims to give you reproducible results that work pretty well out-of-box, and which are easy to tailor to your needs. The general workflow is an initial clustering step -&gt; an automatic or semi-automatic reclustering step -&gt; optional manual refinements -&gt; export to another format, like an image, a set of binary masks, or another R package.</p>
</div>
<div class="section level2">
<h2 id="contact">Contact<a class="anchor" aria-label="anchor" href="#contact"></a>
</h2>
<p>Please do email me if this is something that may be relevant for you or if you have questions. Most of the features in the package are the result of feedback, and no method should be developed in a vacuum. If you include example images in your email, my likelihood of responding goes through the roof.</p>
<p>Email: <a href="mailto:hannahiweller@gmail.com" class="email">hannahiweller@gmail.com</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=recolorize" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/hiweller/recolorize/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/hiweller/recolorize/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://creativecommons.org/licenses/by/4.0" class="external-link">CC BY 4.0</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing recolorize</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Hannah Weller <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-5252-4282" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/hiweller/recolorize/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/hiweller/recolorize/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Hannah Weller.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
