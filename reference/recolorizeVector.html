<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Converts a recolorize color map to a set of polygons, which
can be plotted at any scale without losing quality (as opposed to
the pixel-based bitmap format). Requires the raster, rgeos, and
sp packages to be installed. Useful for creating nice visualizations;
slow on large images. It's recommended to fit a recolorize object
by reducing the original image first, rather than the resize argument
here, which reduces the color map itself (to mixed results)."><title>Convert a recolorize object to a vector — recolorizeVector • recolorize</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert a recolorize object to a vector — recolorizeVector"><meta property="og:description" content="Converts a recolorize color map to a set of polygons, which
can be plotted at any scale without losing quality (as opposed to
the pixel-based bitmap format). Requires the raster, rgeos, and
sp packages to be installed. Useful for creating nice visualizations;
slow on large images. It's recommended to fit a recolorize object
by reducing the original image first, rather than the resize argument
here, which reduces the color map itself (to mixed results)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">recolorize</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Introduction.html">Introduction</a>
    <a class="dropdown-item" href="../articles/step00_prep.html">Step 0: Image acquisition and preparation</a>
    <a class="dropdown-item" href="../articles/step01_loading.html">Step 1: Loading &amp; processing images</a>
    <a class="dropdown-item" href="../articles/step02_initial_cluster.html">Step 2: Initial clustering</a>
    <a class="dropdown-item" href="../articles/step03_refinement.html">Step 3: Refinement</a>
    <a class="dropdown-item" href="../articles/step04_manual_tweak.html">Step 4: Tweaks &amp; edits</a>
    <a class="dropdown-item" href="../articles/step05_visualization_export.html">Step 5: Exporting &amp; visualizing output</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/hiweller/recolorize/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Convert a recolorize object to a vector</h1>
      <small class="dont-index">Source: <a href="https://github.com/hiweller/recolorize/blob/HEAD/R/recolorizeVector.R" class="external-link"><code>R/recolorizeVector.R</code></a></small>
      <div class="d-none name"><code>recolorizeVector.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Converts a <code>recolorize</code> color map to a set of polygons, which
can be plotted at any scale without losing quality (as opposed to
the pixel-based bitmap format). Requires the <code>raster</code>, <code>rgeos</code>, and
<code>sp</code> packages to be installed. Useful for creating nice visualizations;
slow on large images. It's recommended to fit a <code>recolorize</code> object
by reducing the original image first, rather than the <code>resize</code> argument
here, which reduces the color map itself (to mixed results).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">recolorizeVector</span><span class="op">(</span>
  <span class="va">recolorize_obj</span>,
  size_filter <span class="op">=</span> <span class="fl">0.1</span>,
  smoothness <span class="op">=</span> <span class="fl">1</span>,
  base_color <span class="op">=</span> <span class="st">"default"</span>,
  plotting <span class="op">=</span> <span class="cn">FALSE</span>,
  resize <span class="op">=</span> <span class="fl">1</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>recolorize_obj</dt>
<dd><p>An object of class <code>recolorize</code>, as generated
by <a href="recolorize.html">recolorize</a>, <a href="recolorize2.html">recolorize2</a>, <a href="imposeColors.html">imposeColors</a>, or <a href="wernerColor.html">wernerColor</a>.</p></dd>
<dt>size_filter</dt>
<dd><p>The size (as a proportion of the shortest dimension of the
image) of the color patch elements to absorb before vectorizing. Small
details (e.g. stray pixels) tend to look very strange after vectorizing,
so removing these beforehand can improve results.</p></dd>
<dt>smoothness</dt>
<dd><p>Passed to <a href="https://strimas.com/smoothr/reference/smooth.html" class="external-link">smoothr::smooth</a> using the <code>"ksmooth"</code>
method for smoothing the jagged lines that result from converting
pixel coordinates to polygon vertices. Higher values = more smoothing.</p></dd>
<dt>base_color</dt>
<dd><p>The color to use to fill in the gaps that can result from
smoothing. If <code>base_color = "default"</code>, defaults to the darkest color
in the palette. Otherwise, should be the numeric index of one of the colors
in <code>recolorize_obj$centers</code> to use.</p></dd>
<dt>plotting</dt>
<dd><p>Logical. Plot results while computing?</p></dd>
<dt>resize</dt>
<dd><p>Proportion by which to resize the color map before turning
into a polygon, e.g. <code>resize = 0.5</code> will reduce color map size by 50%.
Speeds up the function, but you will almost always get better results
by resizing the initial image when fitting the <code>recolorize</code> object.</p></dd>
<dt>...</dt>
<dd><p>Plotting parameters, passed on to <a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">graphics::plot</a>.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>vector_recolorize</code> object, which is a list with the following
elements:</p><ol><li><p><code>base_layer</code>: The base polygon, essentially the image silhouette.</p></li>
<li><p><code>layers</code>: A list of <a href="https://rdrr.io/pkg/sp/man/SpatialPolygons.html" class="external-link">sp::SpatialPolygonsDataFrame</a> polygons, one per
color patch.</p></li>
<li><p><code>layer_colors</code>: The colors (as hex codes) for each polygon.</p></li>
<li><p><code>base_color</code>: The color (as hex code) for the base polygon.</p></li>
<li><p><code>asp</code>: The original image aspect ratio, important for plotting.</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Although vector objects will typically be smaller than <code>recolorize</code> objects,
because they only need to specify the XY coordinates of the perimeters of
each polygon, they can still be fairly large (and take a long time to
calculate). Users can try a few things to speed this up: using lower
smoothness values; setting <code>plotting = FALSE</code>; resizing the image
(preferably when fitting the initial <code>recolorize</code> object); and
reducing the complexity of the color patches using <a href="absorbLayer.html">absorbLayer</a> or
<a href="editLayer.html">editLayer</a> (e.g. by absorbing all components &lt; 10 pixels in size). Still,
expect this function to take several minutes on even moderately sized
images--it takes about 7-10 seconds for the ~200x100 pixel images in the
examples! Once the function finishes running, however, plotting is
quite fast, and the objects themselves are smaller than the  <code>recolorize</code>
objects.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># \donttest{</span></span>
<span class="r-in"><span class="va">img</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/corbetti.png"</span>, package <span class="op">=</span> <span class="st">"recolorize"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">rc</span> <span class="op">&lt;-</span> <span class="fu"><a href="recolorize2.html">recolorize2</a></span><span class="op">(</span><span class="va">img</span>, cutoff <span class="op">=</span> <span class="fl">45</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using 2^3 = 8 total bins</span>
<span class="r-plt img"><img src="recolorizeVector-1.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="recolorizeVector-2.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># to reset graphical parameters:</span></span>
<span class="r-in"><span class="va">current_par</span> <span class="op">&lt;-</span> <span class="fu">graphics</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>no.readonly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># takes ~10 seconds</span></span>
<span class="r-in"><span class="va">as_vector</span> <span class="op">&lt;-</span> <span class="fu">recolorizeVector</span><span class="op">(</span><span class="va">rc</span>, smoothness <span class="op">=</span> <span class="fl">5</span>,</span>
<span class="r-in">                              size_filter <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required namespace: rgeos</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># to save as an SVG with a transparent background and</span></span>
<span class="r-in"><span class="co"># no margins (e.g. for an illustration figure):</span></span>
<span class="r-in"><span class="fu">grDevices</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grDevices/cairo.html" class="external-link">svg</a></span><span class="op">(</span><span class="st">"recolorize_vector.svg"</span>,</span>
<span class="r-in">height <span class="op">=</span> <span class="fl">4</span>, width <span class="op">=</span> <span class="fl">2</span>, bg <span class="op">=</span> <span class="st">"transparent"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">as_vector</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html" class="external-link">dev.off</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> agg_png </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       2 </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># and to avoid spamming your working directory, run this line to remove</span></span>
<span class="r-in"><span class="co"># the file we just wrote:</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="st">"recolorize_vector.svg"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">graphics</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="va">current_par</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># }</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Hannah Weller.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer></div>

  

  

  </body></html>

